@REM ffmpeg -hwaccel nvdec -hwaccel_device 0 -hwaccel_output_format cuda -i ./videos/raw/test.mkv -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -c:v h264_nvenc -crf 22 -c:a aac -ar 48000 -filter:v:0 scale=w=480:h=360  -maxrate:v:0 600k -b:a:0 64k  -filter:v:1 scale=w=640:h=480  -maxrate:v:1 900k -b:a:1 128k  -filter:v:2 scale=w=1280:h=720 -maxrate:v:2 900k -b:a:2 128k  -filter:v:3 scale=w=1920:h=1080 -maxrate:v:3 5000k -b:a:3 192k -var_stream_map "v:0,a:0,name:360p v:1,a:1,name:480p v:2,a:2,name:720p v:3,a:3,name:1080p" -preset slow -hls_list_size 0 -threads 0 -f hls -hls_playlist_type event -hls_time 3 -hls_flags independent_segments -master_pl_name "video.m3u8" "./videos/hls/test/%v.m3u8" 

@REM ffmpeg -hwaccel cuda -i ./videos/raw/test.mkv -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -c:v h264_nvenc -crf 22 -c:a aac -ar 48000 -filter:v:0 "scale_cuda=w=480:h=360" -maxrate:v:0 600k -b:a:0 64k -filter:v:1 "scale_cuda=w=640:h=480" -maxrate:v:1 900k -b:a:1 128k -filter:v:2 "scale_cuda=w=1280:h=720" -maxrate:v:2 900k -b:a:2 128k -filter:v:3 "scale_cuda=w=1920:h=1080" -maxrate:v:3 5000k -b:a:3 192k -var_stream_map "v:0,a:0,name:360p v:1,a:1,name:480p v:2,a:2,name:720p v:3,a:3,name:1080p" -preset slow -hls_list_size 0 -threads 0 -f hls -hls_playlist_type event -hls_time 3 -hls_flags independent_segments -master_pl_name "video.m3u8" "./videos/hls/test/%v.m3u8"

@REM ffmpeg -hwaccel cuda -i ./videos/raw/test.mkv -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -c:v h264_nvenc -crf 22 -c:a aac -ar 48000 -filter:v:0 "scale_cuda=w=480:h=360" -maxrate:v:0 600k -b:a:0 64k -filter:v:1 "scale_cuda=w=640:h=480" -maxrate:v:1 900k -b:a:1 128k -filter:v:2 "scale_cuda=w=1280:h=720" -maxrate:v:2 900k -b:a:2 128k -filter:v:3 "scale_cuda=w=1920:h=1080" -maxrate:v:3 5000k -b:a:3 192k -filter:a:0 "aresample=async=1" -filter:a:1 "aresample=async=1" -filter:a:2 "aresample=async=1" -filter:a:3 "aresample=async=1" -var_stream_map "v:0,a:0,name:360p v:1,a:1,name:480p v:2,a:2,name:720p v:3,a:3,name:1080p" -preset slow -hls_list_size 0 -threads 0 -f hls -hls_playlist_type event -hls_time 3 -hls_flags independent_segments -master_pl_name "video.m3u8" "./videos/hls/test/%v.m3u8"

@REM ffmpeg -hwaccel cuda -c:v h264 -i ./videos/raw/test.mkv -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -c:v h264_nvenc -crf 22 -c:a aac -ar 48000 -filter:v:0 "scale_cuda=w=480:h=360" -maxrate:v:0 600k -b:a:0 64k -filter:v:1 "scale_cuda=w=640:h=480" -maxrate:v:1 900k -b:a:1 128k -filter:v:2 "scale_cuda=w=1280:h=720" -maxrate:v:2 900k -b:a:2 128k -filter:v:3 "scale_cuda=w=1920:h=1080" -maxrate:v:3 5000k -b:a:3 192k -filter:a:0 "aresample=async=1" -filter:a:1 "aresample=async=1" -filter:a:2 "aresample=async=1" -filter:a:3 "aresample=async=1" -var_stream_map "v:0,a:0,name:360p v:1,a:1,name:480p v:2,a:2,name:720p v:3,a:3,name:1080p" -preset slow -hls_list_size 0 -threads 0 -f hls -hls_playlist_type event -hls_time 3 -hls_flags independent_segments -master_pl_name "video.m3u8" "./videos/hls/test/%v.m3u8"

@REM ffmpeg -hwaccel cuda -c:v h264 -i ./videos/raw/test.mkv -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -c:v h264_nvenc -crf 22 -c:a aac -ar 48000 -filter:v:0 "scale=w=480:h=360" -maxrate:v:0 600k -b:a:0 64k -filter:v:1 "scale=w=640:h=480" -maxrate:v:1 900k -b:a:1 128k -filter:v:2 "scale=w=1280:h=720" -maxrate:v:2 900k -b:a:2 128k -filter:v:3 "scale=w=1920:h=1080" -maxrate:v:3 5000k -b:a:3 192k -filter:a:0 "aresample=async=1" -filter:a:1 "aresample=async=1" -filter:a:2 "aresample=async=1" -filter:a:3 "aresample=async=1" -var_stream_map "v:0,a:0,name:360p v:1,a:1,name:480p v:2,a:2,name:720p v:3,a:3,name:1080p" -preset slow -hls_list_size 0 -threads 0 -f hls -hls_playlist_type event -hls_time 3 -hls_flags independent_segments -master_pl_name "video.m3u8" "./videos/hls/test/%v.m3u8"


@REM ffmpeg -hwaccel cuda -c:v h264 -i ./videos/raw/test.mkv -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -c:v h264_nvenc -crf 22 -c:a aac -ar 48000 -filter:v:0 "format=pix_fmts=yuv420p,scale=w=480:h=360" -maxrate:v:0 600k -b:a:0 64k -filter:v:1 "format=pix_fmts=yuv420p,scale=w=640:h=480" -maxrate:v:1 900k -b:a:1 128k -filter:v:2 "format=pix_fmts=yuv420p,scale=w=1280:h=720" -maxrate:v:2 900k -b:a:2 128k -filter:v:3 "format=pix_fmts=yuv420p,scale=w=1920:h=1080" -maxrate:v:3 5000k -b:a:3 192k -filter:a:0 "aresample=async=1" -filter:a:1 "aresample=async=1" -filter:a:2 "aresample=async=1" -filter:a:3 "aresample=async=1" -var_stream_map "v:0,a:0,name:360p v:1,a:1,name:480p v:2,a:2,name:720p v:3,a:3,name:1080p" -preset slow -hls_list_size 0 -threads 0 -f hls -hls_playlist_type event -hls_time 3 -hls_flags independent_segments -master_pl_name "video.m3u8" "./videos/hls/test/%v.m3u8"

ffmpeg -loglevel debug -hwaccel cuda -c:v h264 -i ./videos/raw/fffe50b4f4se.mkv -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -map 0:v:0 -map 0:a:0 -c:v h264_nvenc -crf 22 -c:a aac -ar 48000 -filter:v:0 "format=pix_fmts=yuv420p,scale=w=480:h=360" -maxrate:v:0 600k -b:a:0 64k -filter:v:1 "format=pix_fmts=yuv420p,scale=w=640:h=480" -maxrate:v:1 900k -b:a:1 128k -filter:v:2 "format=pix_fmts=yuv420p,scale=w=1280:h=720" -maxrate:v:2 900k -b:a:2 128k -filter:v:3 "format=pix_fmts=yuv420p,scale=w=1920:h=1080" -maxrate:v:3 5000k -b:a:3 192k -filter:a:0 "aresample=async=1" -filter:a:1 "aresample=async=1" -filter:a:2 "aresample=async=1" -filter:a:3 "aresample=async=1" -var_stream_map "v:0,a:0,name:360p v:1,a:1,name:480p v:2,a:2,name:720p v:3,a:3,name:1080p" -preset slow -hls_list_size 0 -threads 0 -f hls -hls_playlist_type event -hls_time 3 -hls_flags independent_segments -master_pl_name "video.m3u8" "./videos/hls/fffe50b4f4e/%v.m3u8